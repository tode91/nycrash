<html>
  <head>
    <title>New York Car Crash</title>
	<style src="css/nyc_style.css"></style>
	<svg class="map"></svg>
	<script src="https://d3js.org/d3.v4.min.js"></script>
	<script src="https://d3js.org/topojson.v2.min.js"></script>
	<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
	<script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
	<link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/sunny/jquery-ui.css">
	<script src="http://momentjs.com/downloads/moment.min.js"></script>
	<script src="http://d3js.org/d3.v3.min.js"></script>
	<script src="http://d3js.org/topojson.v1.min.js"></script>
	<script src="http://d3js.org/queue.v1.min.js"></script>

	
	
	<script>
	var svg = d3.select("svg")
				.call(d3.behavior.zoom().on("zoom", function () {
    				svg.attr("transform", "translate(" + d3.event.translate + ")" + " scale(" + d3.event.scale + ")")}))
  				.on("dblclick.zoom", null) 
  				.append("g");
	
	var projection = d3.geo.mercator()
					.center([-74.100, 40.78])
					.scale(83000);

	var path = d3.geo.path().projection(projection);
	
	queue()
	.defer(d3.json, '/resources/nyc_area.min.topojson')
	.defer(d3.json, '/resources/nyc_boundaries.min.topojson')
	//.defer(d3.json, '/resources/new-york_new-york_roads_gen0.min.topojson')
	.defer(d3.json, '/resources/nyc_road_internal_name_not_null.min.topojson')
	.await(makeMyMap);
	

	function makeMyMap(error, area, nyc, /*roads,*/ streets) {
	
		svg.append('path')
			.datum(topojson.feature(area, area.objects.collection))
				.attr('d', path)
				.attr('class', 'area');
		svg.append('path')
			.datum(topojson.feature(nyc, nyc.objects.collection))
				.attr('d', path)
				.attr('class', 'nyc');
		/*svg.append('path')
			.datum(topojson.feature(roads, roads.objects.collection))
				.attr('d', path)
				//.attr('class', 'street-external');
		*/
		svg.selectAll("path")
		   .data(topojson.feature(streets, streets.objects.collection).features)
		   .enter()
		   .append("path")
		   .attr('d', path)
		   .attr('class', 'street')
		   .attr('id', function(el){return "nyc_street_"+el.properties.id})
			
  			
				
		
	}
	</script>
  </body>

</html>